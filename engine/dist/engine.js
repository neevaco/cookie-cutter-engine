!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CookieEngine=t():e.CookieEngine=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(...e){return V._methods.notifyNoticeHandledOnPage(...e)}function o(){return V._properties.verbose}function i(e){return new Promise((t=>setTimeout(t,e)))}function a(e){return{log(...t){o()&&console.log(`CookieCutterEngine(${e})`,...t)},warn(...t){o()&&console.warn(`CookieCutterEngine(${e})`,...t)},error(...t){o()&&console.error(`CookieCutterEngine(${e})`,...t)}}}async function r(e,t,n=0){for(;void 0!==t?CookieControl.getCategoryConsent(n)!==t:null===CookieControl.getCategoryConsent(n);)e(),await i(1e3)}e.r(t),e.d(t,{CookieCategoryType:()=>l,CookieEngine:()=>V});const s={name:"CivicUK",isInUse:()=>!!window.CookieControl?.acceptAll,acceptAll:()=>r(CookieControl.acceptAll,!0),rejectAll:()=>r(CookieControl.rejectAll,!1),getCategories:()=>("function"==typeof CookieControl.config?CookieControl.config():CookieControl.config).optionalCookies.map(((e,t)=>({type:H(e.name),platformIdentifier:t}))),setCategoryConsent:(e,t)=>r((()=>CookieControl.changeCategory(e.platformIdentifier,t)),t,e.platformIdentifier)},c={name:"Consent Manager",isInUse:()=>!!window.cmpmngr?.setPurpose,async init(){for(;!cmpmngr.cnfDone;)await i(100)},acceptAll:()=>cmpmngr.setConsentViaBtn(1),rejectAll:()=>cmpmngr.setConsentViaBtn(0),getCategories:()=>cmpmngr.purposes.map((e=>({platformIdentifier:e.id,type:H(e.getName())}))),setCategoryConsent(e,t){cmpmngr.setPurpose(e.platformIdentifier,t?1:0)}};let l;!function(e){e[e.Essential=0]="Essential",e[e.Preferences=1]="Preferences",e[e.Marketing=2]="Marketing",e[e.Analytics=3]="Analytics",e[e.Social=4]="Social",e[e.DoNotSell=5]="DoNotSell",e[e.Unknown=6]="Unknown"}(l||(l={}));const d={preferences:!1,statistics:!1,marketing:!1},g={name:"CookieBot",isInUse:()=>!!window.CookieConsent?.submitCustomConsent,acceptAll:()=>CookieConsent.submitCustomConsent(!0,!0,!0),rejectAll:()=>CookieConsent.submitCustomConsent(!1,!1,!1),getCategories:()=>[{type:l.Preferences,platformIdentifier:"preferences"},{type:l.Analytics,platformIdentifier:"statistics"},{type:l.Marketing,platformIdentifier:"marketing"}],setCategoryConsent(e,t){d[e.platformIdentifier]=t},flush(){CookieConsent.submitCustomConsent(d.preferences,d.statistics,d.marketing),CookieConsent.hide()}},m=[],f=[],u={name:"Didomi",isInUse:()=>!!window.Didomi,acceptAll:()=>Didomi.setUserAgreeToAll(),rejectAll:()=>Didomi.setUserDisagreeToAll(),getCategories:()=>Didomi.getRequiredPurposes().map((e=>({type:H(e.id),platformIdentifier:e.id}))),setCategoryConsent(e,t){(t?m:f).push(e.platformIdentifier)},flush(){Didomi.setUserConsentStatusForAll(m,f)}},p={categories:{},cookies:{},vendors:{}};let C=!1;const w={name:"Evidon",isInUse:()=>!!window.evidon?.notice,acceptAll:()=>evidon.notice.consentGiven(),rejectAll:()=>evidon.notice.declineGiven(),getCategories:async()=>{const e=await new Promise((e=>evidon.notice.getOptOutCategories(((t,n)=>e(n)))));return Object.keys(e).map((t=>({platformIdentifier:{name:t,vendors:e[t].vendors},type:H(t)})))},setCategoryConsent(e,t){p.categories[e.platformIdentifier.name]=t,e.platformIdentifier.vendors.forEach((e=>{p.vendors[e.CompanyId.toString()]=t})),C=!0},flush(){C&&evidon.notice.consentChanged(p.categories,p.vendors,p.cookies)}};let y={1:!1,2:!1,3:!1};async function h(e){let t=null,n=0;for(;!(t=document.getElementById(e))&&n<5;)await i(500),n++;t?.click()}const k={name:"HubSpot",isInUse:()=>!!document.getElementById("hs-eu-cookie-confirmation")||!!window._hsq?.push,acceptAll:async()=>{await h("hs-eu-confirmation-button"),y={1:!0,2:!0,3:!0}},rejectAll:async()=>{await h("hs-eu-decline-button"),y={1:!1,2:!1,3:!1}},getCategories:()=>[{type:l.Analytics,platformIdentifier:1},{type:l.Marketing,platformIdentifier:2},{type:l.Preferences,platformIdentifier:3}],setCategoryConsent(e,t){y[e.platformIdentifier]=t},flush(){const e=Object.keys(y).map((e=>`${e}:${y[parseInt(e)]}`)).join(",");document.cookie=`__hs_cookie_cat_pref=${e}`}},I={name:"OneTrust",isInUse:()=>!!window.OneTrust?.AllowAll,acceptAll:()=>OneTrust.AllowAll(),rejectAll:()=>OneTrust.RejectAll(),getCategories:()=>OneTrust.GetDomainData().Groups.map((e=>({platformIdentifier:e.PurposeId,type:H(e.GroupName)}))),setCategoryConsent(e,t){const n={identifier:OneTrust.getDataSubjectId?.apply(this)??"",isAnonymous:!1,purposes:[{Id:e.platformIdentifier,TransactionType:t?"CONFIRMED":"OPT_OUT"}]};OneTrust.setConsentProfile(n)},flush(){const e=document.createElement("style");e.innerHTML="#onetrust-consent-sdk, .optanon-alert-box-wrapper { display: none !important; }",document.head.appendChild(e),setTimeout((()=>{document.activeElement?.blur()}),100)}};let A=!1;function E(){return new Promise((e=>{window.Osano.cm.addEventListener("osano-cm-initialized",(()=>{A||(A=!0,window.Osano.cm.showDrawer(),window.Osano.cm.hideDrawer()),e()}))}))}async function b(e){await E(),document.querySelectorAll("input[data-category]").forEach((t=>{t.checked=e,t.dispatchEvent(new Event("change"))})),await v()}function v(){return new Promise((e=>{const t=n=>{e(n),window.Osano.cm.removeEventListener("osano-cm-consent-saved",t)};window.Osano.cm.addEventListener("osano-cm-consent-saved",t),document.querySelector(".osano-cm-save").click()}))}const U={name:"Osano",isInUse:()=>!!window.Osano?.cm,acceptAll:()=>b(!0),rejectAll:()=>b(!1),getCategories:()=>[{type:l.Essential,platformIdentifier:"ESSENTIAL"},{type:l.Unknown,platformIdentifier:"OPT_OUT"},{type:l.Marketing,platformIdentifier:"MARKETING"},{type:l.Preferences,platformIdentifier:"PERSONALIZATION"},{type:l.Analytics,platformIdentifier:"ANALYTICS"}],setCategoryConsent:async function(e,t){await E();const n=document.querySelector(`input[data-category=${e.platformIdentifier}]`);null===n&&console.warn("Unable to set consent for category",e,"Desired:",t,"Actual: Element not found"),n.checked=t,n.dispatchEvent(new Event("change")),await v();const o=window.Osano.cm.getConsent();t!==("ACCEPT"===o[e.platformIdentifier])&&console.warn("Unable to set consent for category",e,"Desired:",t,"Actual:",o[e.platformIdentifier])}};function S(){return document.getElementById("ifrmPrivacyBanner")?.contentDocument}function O(e){return new Promise((async t=>{for(;;)try{return e(),void t()}catch{await i(1e3)}}))}const _={name:"SecurePrivacy",isInUse:()=>!!window.initialize_secure_privacy,acceptAll:()=>O((()=>sp.saveAllConsents("cookieBanner",!0))),rejectAll:()=>O((()=>sp.saveAllConsents("cookieBanner",!1))),async getCategories(){const e=S()?.querySelectorAll("input[id^=tracker]"),t=[];return e&&0!==e.length?(e.forEach((e=>{const n=H(e.getAttribute("data-compliancetype"));t.push({platformIdentifier:e.id,type:n})})),t):(await i(1e3),await this.getCategories())},setCategoryConsent(e,t){const n=S()?.getElementById(e.platformIdentifier);n.checked=t,sp.saveAllConsents("privacyBanner",!1)}},T={};async function P(){let e=null;for(;!(e=bannerConfigUtils.getLanguageConfigMap().en);)await i(500);return e.categories}const j={name:"Securiti",isInUse:()=>!!window.TCFUtils?.updateConsentFromBanner,acceptAll:async()=>(await P()).forEach((e=>T[e.name]=!0)),rejectAll:async()=>(await P()).forEach((e=>T[e.name]=!1)),getCategories:async()=>(await P()).map((e=>({type:H(e.name),platformIdentifier:e.name}))),setCategoryConsent(e,t){T[e.platformIdentifier]=t},flush:async()=>{await bannerGenerator.dropPrivaciCookies(T),await i(500),await bannerGenerator.dropPrivaciCookies(T)}},D={name:"Stack Exchange",isInUse:()=>!!window.StackExchange,init:()=>new Promise((e=>{const t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("charset","UTF-8"),t.setAttribute("data-domain-script",StackExchange.settings.legal.oneTrustConfigId),t.setAttribute("async","true"),t.setAttribute("src","https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"),t.onload=function(){const t=window.setInterval((function(){Object.prototype.hasOwnProperty.call(window,"OneTrust")&&(window.clearInterval(t),e())}),20)},document.body.appendChild(t)})),acceptAll:I.acceptAll,rejectAll:I.rejectAll,getCategories:I.getCategories,setCategoryConsent:I.setCategoryConsent,flush(){I.flush();const e=document.createElement("style");e.innerHTML=".js-consent-banner { display: none !important; }",document.head.appendChild(e)}};function N(){truste.bn.isConsentTrack=!1;const e=truste.eu.bindMap.params.c||"teconsent";truste.bn.show(document.getElementById(e)),truste.bn.hide(document.getElementById("truste-consent-track"))}let M=[];const B={name:"TrustArc",isInUse:()=>!!window.truste?.bn?.show,acceptAll:()=>{M=[0,1,2],truste.eu.ccpa?.dropCcpaCookie(!1)},rejectAll:()=>{M=[0]},getCategories:async()=>{N();const e=(await new Promise((e=>truste.util.callCMEndpoint("/defaultconsentmanager/getOptOutDomains?",null,e)))).responseText,t=JSON.parse(e);return truste.util.setStorage(truste.eu.COOKIE_CATEGORY_NAME,e,!1),Object.keys(t).map((e=>({platformIdentifier:t[e].value,type:H(e)})))},setCategoryConsent(e,t){t&&M.push(e.platformIdentifier)},flush(){var e;M.length>0&&(M=M.filter(((e,t,n)=>n.indexOf(e)===t)),e=M,truste.eu.actmessage({source:"preference_manager",message:"submit_preferences",data:{value:e.join(",")}}),N())}},$={name:"Usercentrics",isInUse:()=>!!window.UC_UI?.acceptAllConsents,acceptAll:()=>UC_UI.acceptAllConsents(),rejectAll:()=>UC_UI.denyAllConsents(),getCategories:()=>UC_UI.getServicesBaseInfo().map((e=>({platformIdentifier:e.id,type:H(e.categorySlug)}))),setCategoryConsent:(e,t)=>t?UC_UI.acceptService(e.platformIdentifier):UC_UI.rejectService(e.platformIdentifier),flush(){UC_UI.closeCMP()}},x=a("providers.ts"),F={[l.Essential]:["essential","necessary"],[l.Marketing]:["marketing","targeting","function","advertising","personalization","personalize","ads","geolocation"],[l.Analytics]:["analytic","measurement","statistics","research"],[l.Preferences]:["preference","personalization"],[l.Social]:["social"],[l.DoNotSell]:["do not sell"],[l.Unknown]:["other"]};function H(e){if(!e)return x.log("Returning unknown category. Category name was undefined"),l.Unknown;const t=Object.keys(F).length,n=e.toLowerCase();for(let o=0;o<t;o++)if(F[o].some((e=>n.includes(e))))return x.log(`Matched given string category '${e}' with CookieCategoryType.${l[o]}`),o;return x.log(`Failed to match string category '${e}' to a CookieCategoryType`),l.Unknown}const L=[I,s,U,_,j,B,w,g,c,D,u,$,k],G=a("index.ts");async function R(e){e.flush&&await e.flush()}async function q(e){if(G.log("Checking for provider:",e.name),!await e.isInUse())return G.log(`Skipping ${e.name}. Not detected on page`),!1;if(G.log("Cookie notice found!"),await function(...e){return V._methods.incrementCookieStats(...e)}(),function(...e){V._methods.logProviderUsage(...e)}(e.name),function(){const e=async()=>{const e=await function(...e){return V._methods.getHostname(...e)}();e&&window.localStorage.setItem(z,e)};window.addEventListener("beforeunload",e),setTimeout((()=>window.removeEventListener("beforeunload",e)),2e3)}(),await async function(e){e.init&&await e.init()}(e),G.log("Initialized provider"),await function(...e){return V._methods.areAllEnabled(...e)}())return G.log("All cookies enabled, calling acceptAll()"),await e.acceptAll(),await R(e),!0;G.log("Mix of cookies or none enabled, calling rejectAll()"),await e.rejectAll();try{(await e.getCategories()).forEach((async t=>{const n=await function(...e){return V._methods.isTypeEnabled(...e)}(t.type);G.log(`Setting consent to ${n} for category ${t.type}`),await e.setCategoryConsent(t,n)}))}catch(e){G.error(e)}return await R(e),!0}const z="neeva_pending_flag",K=async function e(t=5){if(await async function(){const e=window.localStorage.getItem(z);e&&(G.log("Reload loop detected! Flagging site."),window.localStorage.removeItem(z),await function(...e){return V._methods.flagSite(...e)}(e))}(),await function(...e){return V._methods.isCookieConsentingEnabled(...e)}()&&!await function(...e){return V._methods.isFlaggedSite(...e)}())if(0!==t){G.log("Checking for cookie notices!",`${t} attempt(s) left`);for(let e=0;e<L.length;e++)if(await q(L[e]))return G.log("Finished dismissing notice"),void(window===window.top&&(G.log("Notifying that we handled a cookie notice in the main frame"),n(!0)));await i(1e3),e(t-1)}else G.log("Cookie cutter failed to find a cookie notice after 5 attempts. Giving up");else G.warn("Not running cookie cutter! Disabled by user or site flagged")};class V{static _properties={verbose:!1};static _methods={areAllEnabled(){throw new Error("Undefined method areAllEnabled")},isCookieConsentingEnabled(){throw new Error("Undefined method isCookieConsentingEnabled")},isTypeEnabled(e){throw new Error("Undefined method isTypeEnabled")},getHostname(){throw new Error("Undefined method getHostname")},flagSite(e){throw new Error("Undefined method flagSite")},isFlaggedSite(){throw new Error("Undefined method isFlaggedSite")},incrementCookieStats(){throw new Error("Undefined method incrementCookieStats")},notifyNoticeHandledOnPage(e){throw new Error("Undefined method notifyNoticeHandledOnPage")},logProviderUsage(e){throw new Error("Undefined method logProviderUsage")}};static useVerboseLogging(){V._properties.verbose=!0}static areAllEnabled(e){V._methods.areAllEnabled=e}static isCookieConsentingEnabled(e){V._methods.isCookieConsentingEnabled=e}static isTypeEnabled(e){V._methods.isTypeEnabled=e}static getHostname(e){V._methods.getHostname=e}static flagSite(e){V._methods.flagSite=e}static isFlaggedSite(e){V._methods.isFlaggedSite=e}static incrementCookieStats(e){V._methods.incrementCookieStats=e}static notifyNoticeHandledOnPage(e){V._methods.notifyNoticeHandledOnPage=e}static logProviderUsage(e){V._methods.logProviderUsage=e}static runCookieCutter(){K()}}return t})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW5naW5lLmpzIiwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ29va2llRW5naW5lL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJDb29raWVFbmdpbmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiQ29va2llRW5naW5lXCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgKCkgPT4ge1xucmV0dXJuICJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==